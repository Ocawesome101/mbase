<html><title>man/shell.3</title><body style="font-family:Courier;background-color:#000;color:#FFF;"><span style="color:FFFFFF;font-weight:bold;">NAME<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shell - library doing most processing behind sh<br><br><span style="color:FFFFFF;font-weight:bold;">DESCRIPTION<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The <span style="color:FFFFFF;font-weight:bold;">shell<span style="color:FFFFFF;font-weight:normal;"> library does the bulk of the processing behind the relatively small <span style="color:DDDD00;font-weight:bold;">/bin/sh.lua<span style="color:FFFFFF;font-weight:normal;"> script.&nbsp;&nbsp;It provides facilities for argument parsing, executing commands, and features some builtins under <span style="color:00FF00;font-weight:bold;">shell.builtins<span style="color:FFFFFF;font-weight:normal;">.<br><br><span style="color:FFFFFF;font-weight:bold;">FIELDS<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:00FF00;font-weight:bold;">shell.builtins<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Table containing all shell builtins.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:00FF00;font-weight:bold;">shell.errors<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Table mapping common error codes to error messages.&nbsp;&nbsp;Any attempt to index a nonexistent entry will simply return <span style="color:FF0000;font-weight:bold;">"failed"<span style="color:FFFFFF;font-weight:normal;">.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:00FF00;font-weight:bold;">shell.codes<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Provides bindings of a fashion for common error codes.&nbsp;&nbsp;Available are <span style="color:FFFFFF;font-weight:bold;">misc<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FFFFFF;font-weight:bold;">success<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FFFFFF;font-weight:bold;">failure<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FFFFFF;font-weight:bold;">argument<span style="color:FFFFFF;font-weight:normal;">, and <span style="color:FFFFFF;font-weight:bold;">permission<span style="color:FFFFFF;font-weight:normal;">.<br><br><span style="color:FFFFFF;font-weight:bold;">METHODS<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setAlias<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">k<span style="color:FFFFFF;font-weight:normal;">: <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FFFFFF;font-weight:bold;">v<span style="color:FFFFFF;font-weight:normal;">: <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Aliases the command <span style="color:FF0000;font-weight:bold;">k<span style="color:FFFFFF;font-weight:normal;"> to the string <span style="color:FF0000;font-weight:bold;">v<span style="color:FFFFFF;font-weight:normal;">.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">unsetAlias<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">k<span style="color:FFFFFF;font-weight:normal;">: <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unsets the alias <span style="color:FF0000;font-weight:bold;">k<span style="color:FFFFFF;font-weight:normal;"> if it was previously set.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">error<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">cmd<span style="color:FFFFFF;font-weight:normal;">: <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FFFFFF;font-weight:bold;">err<span style="color:FFFFFF;font-weight:normal;">: <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Writes a message in the format <span style="color:FF0000;font-weight:bold;">cmd: err<span style="color:FFFFFF;font-weight:normal;"> to standard error.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">expand<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">str<span style="color:FFFFFF;font-weight:normal;">: <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">): <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Expands the provided string for variables and basic wildcards.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">parse<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">...<span style="color:FFFFFF;font-weight:normal;">: <span style="color:FF0000;font-weight:bold;">strings<span style="color:FFFFFF;font-weight:normal;">): <span style="color:00FF00;font-weight:bold;">table<span style="color:FFFFFF;font-weight:normal;">, <span style="color:00FF00;font-weight:bold;">table<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parses the provided varargs <span style="color:FF0000;font-weight:bold;">...<span style="color:FFFFFF;font-weight:normal;"> into two tables <span style="color:00FF00;font-weight:bold;">args<span style="color:FFFFFF;font-weight:normal;"> and <span style="color:00FF00;font-weight:bold;">opts<span style="color:FFFFFF;font-weight:normal;">.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If a provided argument is the string <span style="color:FF0000;font-weight:bold;">--<span style="color:FFFFFF;font-weight:normal;">, then the function will insert all remaining varargs into the <span style="color:00FF00;font-weight:bold;">args<span style="color:FFFFFF;font-weight:normal;"> table.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If a provided argument begins with <span style="color:FF0000;font-weight:bold;">--<span style="color:FFFFFF;font-weight:normal;">, it will be interpreted as <span style="color:FFFFFF;font-weight:bold;">--<span style="color:FF00FF;font-weight:bold;">k<span style="color:FFFFFF;font-weight:bold;">=<span style="color:FF00FF;font-weight:bold;">v<span style="color:FFFFFF;font-weight:normal;">.&nbsp;&nbsp;<span style="color:00FF00;font-weight:bold;">opts<span style="color:FFFFFF;font-weight:normal;">[<span style="color:FF0000;font-weight:bold;">k<span style="color:FFFFFF;font-weight:normal;">] will be set to either <span style="color:FF0000;font-weight:bold;">v<span style="color:FFFFFF;font-weight:normal;"> or <span style="color:FF00FF;font-weight:bold;">true<span style="color:FFFFFF;font-weight:normal;">.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If a provided argument begins with <span style="color:FF0000;font-weight:bold;">-<span style="color:FFFFFF;font-weight:normal;">, each character will be interpreted as its own option.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;All other arguments will be inserted into the <span style="color:00FF00;font-weight:bold;">args<span style="color:FFFFFF;font-weight:normal;"> table.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">getopt<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">args<span style="color:FFFFFF;font-weight:normal;">: <span style="color:00FF00;font-weight:bold;">table<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FFFFFF;font-weight:bold;">argdefs<span style="color:FFFFFF;font-weight:normal;">: <span style="color:00FF00;font-weight:bold;">table<span style="color:FFFFFF;font-weight:normal;">): <span style="color:00FF00;font-weight:bold;">table<span style="color:FFFFFF;font-weight:normal;">, <span style="color:00FF00;font-weight:bold;">table<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;More flexible version of <span style="color:00AAFF;font-weight:bold;">shell.parse<span style="color:FFFFFF;font-weight:normal;"> inspired by GNU <span style="color:FFFFFF;font-weight:bold;">getopt()<span style="color:FFFFFF;font-weight:normal;">.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:00FF00;font-weight:bold;">argdefs<span style="color:FFFFFF;font-weight:normal;"> should take the form of <span style="color:00FF00;font-weight:bold;">{<span style="color:FFFFFF;font-weight:normal;"> [<span style="color:FF0000;font-weight:bold;">"option"<span style="color:FFFFFF;font-weight:normal;">] = <span style="color:00FF00;font-weight:bold;">{<span style="color:FFFFFF;font-weight:normal;"> takesarg = <span style="color:FF00FF;font-weight:bold;">boolean<span style="color:FFFFFF;font-weight:normal;">, reqarg = <span style="color:FF00FF;font-weight:bold;">boolean<span style="color:FFFFFF;font-weight:normal;"> <span style="color:00FF00;font-weight:bold;">}<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FFFFFF;font-weight:bold;">...<span style="color:FFFFFF;font-weight:normal;"> <span style="color:00FF00;font-weight:bold;">}<span style="color:FFFFFF;font-weight:normal;">.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FF00FF;font-weight:bold;">takesarg<span style="color:FFFFFF;font-weight:normal;"> specifies whether the option will accept an argument and <span style="color:FF00FF;font-weight:bold;">reqarg<span style="color:FFFFFF;font-weight:normal;"> specifies if the argument is required.&nbsp;&nbsp;If an option is not specified in the table, <span style="color:00AAFF;font-weight:bold;">shell.getopt<span style="color:FFFFFF;font-weight:normal;"> will parse it in a similar manner to <span style="color:00AAFF;font-weight:bold;">shell.parse<span style="color:FFFFFF;font-weight:normal;">.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">resolve<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">path<span style="color:FFFFFF;font-weight:normal;">: <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">[, <span style="color:FFFFFF;font-weight:bold;">ext<span style="color:FFFFFF;font-weight:normal;">: <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">]): <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;"> or <span style="color:FFFFFF;font-weight:bold;">nil<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attempts to resolve the filename <span style="color:FF0000;font-weight:bold;">path<span style="color:FFFFFF;font-weight:normal;"> to a command.&nbsp;&nbsp;Checks the absolute path if applicable, all entries in the path, and the current working directory, in order.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">split<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">str<span style="color:FFFFFF;font-weight:normal;">: <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">): <span style="color:00FF00;font-weight:bold;">table<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Slower but slightly more advanced text splitting function.&nbsp;&nbsp;Splits text on spaces, except when the space is between a pair of single quotes.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">execute<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">...<span style="color:FFFFFF;font-weight:normal;">: <span style="color:FF0000;font-weight:bold;">strings<span style="color:FFFFFF;font-weight:normal;">): <span style="color:FF00FF;font-weight:bold;">boolean<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Interprets <span style="color:FF0000;font-weight:bold;">...<span style="color:FFFFFF;font-weight:normal;"> as a shell command as seen in the manual page for <span style="color:FFFFFF;font-weight:bold;">sh<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">1<span style="color:FFFFFF;font-weight:normal;">).<br><br><span style="color:FFFFFF;font-weight:bold;">COPYRIGHT<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Monolith System Utilities<span style="color:FFFFFF;font-weight:normal;"> (c) 2020 Ocawesome101 under the GNU GPLv3.<br><br><span style="color:FFFFFF;font-weight:bold;">SEE ALSO<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sh<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">1<span style="color:FFFFFF;font-weight:normal;">), <span style="color:FFFFFF;font-weight:bold;">sh<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">3<span style="color:FFFFFF;font-weight:normal;">)<br>
</body></html>