<html><title>man/thread.2</title><body><div style="width:80ch;"><pre><span style="color:000000;font-weight:bold;">NAME</span>
        thread - system thread management

<span style="color:000000;font-weight:bold;">DESCRIPTION
        thread</span> provides thread management for the Monolith kernel.  In addition
 to a few functions, <span style="color:000000;font-weight:bold;">thread</span> also provides a table of predefined <span style="color:000000;font-weight:bold;">signals</span>(<span style="color:000000;font-weight:bold;">2</span>)
, not to be confused with the signals returned from <span style="color:000000;font-weight:bold;">computer.pullSignal</span>(<span style="color:000000;font-weight:bold;">2</span>).

<span style="color:000000;font-weight:bold;">SIGNALS
        thread_died</span>(<span style="color:000000;font-weight:bold;">pid</span>:<span style="color:DDDD00;font-weight:bold;">number</span>)
                Queued on the death of a thread.

        <span style="color:000000;font-weight:bold;">thread_errored</span>(<span style="color:000000;font-weight:bold;">pid</span>:<span style="color:DDDD00;font-weight:bold;">number</span>, <span style="color:000000;font-weight:bold;">reason</span>:<span style="color:FF0000;font-weight:bold;">string</span>)
                Queued when a thread errors.

        <span style="color:000000;font-weight:bold;">ipc</span>(<span style="color:000000;font-weight:bold;">from</span>:<span style="color:DDDD00;font-weight:bold;">number</span>, ...)
                This signal is thread-local, and sent on IPC communication.

        <span style="color:000000;font-weight:bold;">signal</span>(<span style="color:000000;font-weight:bold;">from</span>:<span style="color:DDDD00;font-weight:bold;">number</span>, <span style="color:000000;font-weight:bold;">signal</span>:<span style="color:DDDD00;font-weight:bold;">number</span>)
                This signal is thread-local. Sent on signal reception.

<span style="color:000000;font-weight:bold;">METHODS
        spawn</span>(<span style="color:000000;font-weight:bold;">func</span>:<span style="color:00AAFF;font-weight:bold;">function</span>, <span style="color:000000;font-weight:bold;">name</span>:<span style="color:FF0000;font-weight:bold;">string</span>[, <span style="color:000000;font-weight:bold;">handler</span>:<span style="color:00AAFF;font-weight:bold;">function</span>[, <span style="color:000000;font-weight:bold;">env</span>
:<span style="color:00FF00;font-weight:bold;">table</span>]]): <span style="color:DDDD00;font-weight:bold;">number</span> or <span style="color:000000;font-weight:bold;">nil</span>, <span style="color:FF0000;font-weight:bold;">string</span>
                Spawns a thread from function <span style="color:00AAFF;font-weight:bold;">func</span> named <span style="color:FF0000;font-weight:bold;">name</span>.  If <span style="color:00AAFF;font-weight:bold;">handler</span>
 is specified, it will be called if the thread errors.  <span style="color:00FF00;font-weight:bold;">env</span> may be used to pre
define environment variables.

        <span style="color:000000;font-weight:bold;">threads</span>(): <span style="color:00FF00;font-weight:bold;">table</span>
                Returns a table of running PIDs.

        <span style="color:000000;font-weight:bold;">info</span>([<span style="color:000000;font-weight:bold;">pid</span>:<span style="color:DDDD00;font-weight:bold;">number</span>]): <span style="color:00FF00;font-weight:bold;">table</span> or <span style="color:000000;font-weight:bold;">nil</span>, <span style="color:FF0000;font-weight:bold;">string</span>
                Returns a table of information about the specified thread (defau
lts to the current thread), or <span style="color:000000;font-weight:bold;">nil</span> and an error message.

                Information tables are formatted as such:

                    <span style="color:00FF00;font-weight:bold;">{
                      <span style="color:</span>000000;font-weight:bold;">name</span> = <span style="color:FF0000;font-weight:bold;">string</span>,
                      <span style="color:000000;font-weight:bold;">owner</span> = <span style="color:DDDD00;font-weight:bold;">number</span>,
                      <span style="color:000000;font-weight:bold;">priority</span> = <span style="color:DDDD00;font-weight:bold;">number</span>,
                      <span style="color:000000;font-weight:bold;">parent</span> = <span style="color:DDDD00;font-weight:bold;">number</span>,
                      <span style="color:000000;font-weight:bold;">uptime</span> = <span style="color:DDDD00;font-weight:bold;">number</span>,
                      <span style="color:000000;font-weight:bold;">started</span> = <span style="color:DDDD00;font-weight:bold;">number</span>
                    <span style="color:00FF00;font-weight:bold;">}</span>

                If the specified thread is the current one, the information tabl
e will have an additional field, <span style="color:00FF00;font-weight:bold;">data</span>:
                    <span style="color:000000;font-weight:bold;">info.data</span> = <span style="color:00FF00;font-weight:bold;">{
                      <span style="color:</span>000000;font-weight:bold;">io</span> = <span style="color:00FF00;font-weight:bold;">{
                        <span style="color:</span>000000;font-weight:bold;">[0]</span> = <span style="color:00FF00;font-weight:bold;">table</span>: <span style="color:000000;font-weight:bold;">thread stdin</span>,
                        <span style="color:000000;font-weight:bold;">[1]</span> = <span style="color:00FF00;font-weight:bold;">table</span>: <span style="color:000000;font-weight:bold;">thread stdout</span>,
                        <span style="color:000000;font-weight:bold;">[2]</span> = <span style="color:00FF00;font-weight:bold;">table</span>: <span style="color:000000;font-weight:bold;">thread stderr</span>
                      <span style="color:00FF00;font-weight:bold;">}</span>,
                      <span style="color:000000;font-weight:bold;">env</span> = <span style="color:00FF00;font-weight:bold;">table</span>: <span style="color:000000;font-weight:bold;">thread environment variables</span>
                    <span style="color:00FF00;font-weight:bold;">}</span>

        <span style="color:000000;font-weight:bold;">ipc</span>(<span style="color:000000;font-weight:bold;">pid</span>:<span style="color:DDDD00;font-weight:bold;">number</span>, ...): <span style="color:FF00FF;font-weight:bold;">boolean</span> or <span style="color:000000;font-weight:bold;">nil</span>, <span style="color:FF0000;font-weight:bold;">string</span>
                Sends an IPC event to thread <span style="color:DDDD00;font-weight:bold;">pid</span>.

        <span style="color:000000;font-weight:bold;">signal</span>(<span style="color:000000;font-weight:bold;">pid</span>:<span style="color:DDDD00;font-weight:bold;">number</span>, <span style="color:000000;font-weight:bold;">signal</span>:<span style="color:DDDD00;font-weight:bold;">number</span>): <span style="color:FF00FF;font-weight:bold;">boolean</span> or <span style="color:000000;font-weight:bold;">nil</span>, <span style="color:FF0000;font-weight:bold;">string
</span>
                Sends signal <span style="color:DDDD00;font-weight:bold;">signal</span> to thread <span style="color:DDDD00;font-weight:bold;">pid</span>.

        <span style="color:000000;font-weight:bold;">kill</span>(<span style="color:000000;font-weight:bold;">pid</span>:<span style="color:DDDD00;font-weight:bold;">number</span>): <span style="color:FF00FF;font-weight:bold;">boolean</span> or <span style="color:000000;font-weight:bold;">nil</span>, <span style="color:FF0000;font-weight:bold;">string</span>
                Alias for <span style="color:000000;font-weight:bold;">signal</span>(<span style="color:000000;font-weight:bold;">pid</span>, <span style="color:000000;font-weight:bold;">signals.kill</span>)

<span style="color:000000;font-weight:bold;">COPYRIGHT
        Monolith Kernel Interfaces</span> (c) 2020 Ocawesome101 under the GNU GPLv3.

<span style="color:000000;font-weight:bold;">SEE ALSO
        computer</span>(<span style="color:000000;font-weight:bold;">2</span>), <span style="color:000000;font-weight:bold;">ps</span>(<span style="color:000000;font-weight:bold;">1</span>), <span style="color:000000;font-weight:bold;">kill</span>(<span style="color:000000;font-weight:bold;">1</span>)


</pre></div></body></html>