<html><title>man/thread.2</title><body><div style="width:80ch;"><pre><span style="color:000000;font-weight:bold;">NAME<span style="color:000000;font-weight:normal;">
        thread - system thread management

<span style="color:000000;font-weight:bold;">DESCRIPTION
        thread<span style="color:000000;font-weight:normal;"> provides thread management for the Monolith kernel.  In addition
 to a few functions, <span style="color:000000;font-weight:bold;">thread<span style="color:000000;font-weight:normal;"> also provides a table of predefined <span style="color:000000;font-weight:bold;">signals<span style="color:000000;font-weight:normal;">(<span style="color:000000;font-weight:bold;">2<span style="color:000000;font-weight:normal;">)
, not to be confused with the signals returned from <span style="color:000000;font-weight:bold;">computer.pullSignal<span style="color:000000;font-weight:normal;">(<span style="color:000000;font-weight:bold;">2<span style="color:000000;font-weight:normal;">).

<span style="color:000000;font-weight:bold;">SIGNALS
        thread_died<span style="color:000000;font-weight:normal;">(<span style="color:000000;font-weight:bold;">pid<span style="color:000000;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:000000;font-weight:normal;">)
                Queued on the death of a thread.

        <span style="color:000000;font-weight:bold;">thread_errored<span style="color:000000;font-weight:normal;">(<span style="color:000000;font-weight:bold;">pid<span style="color:000000;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:000000;font-weight:normal;">, <span style="color:000000;font-weight:bold;">reason<span style="color:000000;font-weight:normal;">:<span style="color:FF0000;font-weight:bold;">string<span style="color:000000;font-weight:normal;">)
                Queued when a thread errors.

        <span style="color:000000;font-weight:bold;">ipc<span style="color:000000;font-weight:normal;">(<span style="color:000000;font-weight:bold;">from<span style="color:000000;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:000000;font-weight:normal;">, ...)
                This signal is thread-local, and sent on IPC communication.

        <span style="color:000000;font-weight:bold;">signal<span style="color:000000;font-weight:normal;">(<span style="color:000000;font-weight:bold;">from<span style="color:000000;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:000000;font-weight:normal;">, <span style="color:000000;font-weight:bold;">signal<span style="color:000000;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:000000;font-weight:normal;">)
                This signal is thread-local. Sent on signal reception.

<span style="color:000000;font-weight:bold;">METHODS
        spawn<span style="color:000000;font-weight:normal;">(<span style="color:000000;font-weight:bold;">func<span style="color:000000;font-weight:normal;">:<span style="color:00AAFF;font-weight:bold;">function<span style="color:000000;font-weight:normal;">, <span style="color:000000;font-weight:bold;">name<span style="color:000000;font-weight:normal;">:<span style="color:FF0000;font-weight:bold;">string<span style="color:000000;font-weight:normal;">[, <span style="color:000000;font-weight:bold;">handler<span style="color:000000;font-weight:normal;">:<span style="color:00AAFF;font-weight:bold;">function<span style="color:000000;font-weight:normal;">[, <span style="color:000000;font-weight:bold;">env<span style="color:000000;font-weight:normal;">
:<span style="color:00FF00;font-weight:bold;">table<span style="color:000000;font-weight:normal;">]]): <span style="color:DDDD00;font-weight:bold;">number<span style="color:000000;font-weight:normal;"> or <span style="color:000000;font-weight:bold;">nil<span style="color:000000;font-weight:normal;">, <span style="color:FF0000;font-weight:bold;">string<span style="color:000000;font-weight:normal;">
                Spawns a thread from function <span style="color:00AAFF;font-weight:bold;">func<span style="color:000000;font-weight:normal;"> named <span style="color:FF0000;font-weight:bold;">name<span style="color:000000;font-weight:normal;">.  If <span style="color:00AAFF;font-weight:bold;">handler<span style="color:000000;font-weight:normal;">
 is specified, it will be called if the thread errors.  <span style="color:00FF00;font-weight:bold;">env<span style="color:000000;font-weight:normal;"> may be used to pre
define environment variables.

        <span style="color:000000;font-weight:bold;">threads<span style="color:000000;font-weight:normal;">(): <span style="color:00FF00;font-weight:bold;">table<span style="color:000000;font-weight:normal;">
                Returns a table of running PIDs.

        <span style="color:000000;font-weight:bold;">info<span style="color:000000;font-weight:normal;">([<span style="color:000000;font-weight:bold;">pid<span style="color:000000;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:000000;font-weight:normal;">]): <span style="color:00FF00;font-weight:bold;">table<span style="color:000000;font-weight:normal;"> or <span style="color:000000;font-weight:bold;">nil<span style="color:000000;font-weight:normal;">, <span style="color:FF0000;font-weight:bold;">string<span style="color:000000;font-weight:normal;">
                Returns a table of information about the specified thread (defau
lts to the current thread), or <span style="color:000000;font-weight:bold;">nil<span style="color:000000;font-weight:normal;"> and an error message.

                Information tables are formatted as such:

                    <span style="color:00FF00;font-weight:bold;">{
                      <span style="color:000000;font-weight:bold;">name<span style="color:000000;font-weight:normal;"> = <span style="color:FF0000;font-weight:bold;">string<span style="color:000000;font-weight:normal;">,
                      <span style="color:000000;font-weight:bold;">owner<span style="color:000000;font-weight:normal;"> = <span style="color:DDDD00;font-weight:bold;">number<span style="color:000000;font-weight:normal;">,
                      <span style="color:000000;font-weight:bold;">priority<span style="color:000000;font-weight:normal;"> = <span style="color:DDDD00;font-weight:bold;">number<span style="color:000000;font-weight:normal;">,
                      <span style="color:000000;font-weight:bold;">parent<span style="color:000000;font-weight:normal;"> = <span style="color:DDDD00;font-weight:bold;">number<span style="color:000000;font-weight:normal;">,
                      <span style="color:000000;font-weight:bold;">uptime<span style="color:000000;font-weight:normal;"> = <span style="color:DDDD00;font-weight:bold;">number<span style="color:000000;font-weight:normal;">,
                      <span style="color:000000;font-weight:bold;">started<span style="color:000000;font-weight:normal;"> = <span style="color:DDDD00;font-weight:bold;">number<span style="color:000000;font-weight:normal;">
                    <span style="color:00FF00;font-weight:bold;">}<span style="color:000000;font-weight:normal;">

                If the specified thread is the current one, the information tabl
e will have an additional field, <span style="color:00FF00;font-weight:bold;">data<span style="color:000000;font-weight:normal;">:
                    <span style="color:000000;font-weight:bold;">info.data<span style="color:000000;font-weight:normal;"> = <span style="color:00FF00;font-weight:bold;">{
                      <span style="color:000000;font-weight:bold;">io<span style="color:000000;font-weight:normal;"> = <span style="color:00FF00;font-weight:bold;">{
                        <span style="color:000000;font-weight:bold;">[0]<span style="color:000000;font-weight:normal;"> = <span style="color:00FF00;font-weight:bold;">table<span style="color:000000;font-weight:normal;">: <span style="color:000000;font-weight:bold;">thread stdin<span style="color:000000;font-weight:normal;">,
                        <span style="color:000000;font-weight:bold;">[1]<span style="color:000000;font-weight:normal;"> = <span style="color:00FF00;font-weight:bold;">table<span style="color:000000;font-weight:normal;">: <span style="color:000000;font-weight:bold;">thread stdout<span style="color:000000;font-weight:normal;">,
                        <span style="color:000000;font-weight:bold;">[2]<span style="color:000000;font-weight:normal;"> = <span style="color:00FF00;font-weight:bold;">table<span style="color:000000;font-weight:normal;">: <span style="color:000000;font-weight:bold;">thread stderr<span style="color:000000;font-weight:normal;">
                      <span style="color:00FF00;font-weight:bold;">}<span style="color:000000;font-weight:normal;">,
                      <span style="color:000000;font-weight:bold;">env<span style="color:000000;font-weight:normal;"> = <span style="color:00FF00;font-weight:bold;">table<span style="color:000000;font-weight:normal;">: <span style="color:000000;font-weight:bold;">thread environment variables<span style="color:000000;font-weight:normal;">
                    <span style="color:00FF00;font-weight:bold;">}<span style="color:000000;font-weight:normal;">

        <span style="color:000000;font-weight:bold;">ipc<span style="color:000000;font-weight:normal;">(<span style="color:000000;font-weight:bold;">pid<span style="color:000000;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:000000;font-weight:normal;">, ...): <span style="color:FF00FF;font-weight:bold;">boolean<span style="color:000000;font-weight:normal;"> or <span style="color:000000;font-weight:bold;">nil<span style="color:000000;font-weight:normal;">, <span style="color:FF0000;font-weight:bold;">string<span style="color:000000;font-weight:normal;">
                Sends an IPC event to thread <span style="color:DDDD00;font-weight:bold;">pid<span style="color:000000;font-weight:normal;">.

        <span style="color:000000;font-weight:bold;">signal<span style="color:000000;font-weight:normal;">(<span style="color:000000;font-weight:bold;">pid<span style="color:000000;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:000000;font-weight:normal;">, <span style="color:000000;font-weight:bold;">signal<span style="color:000000;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:000000;font-weight:normal;">): <span style="color:FF00FF;font-weight:bold;">boolean<span style="color:000000;font-weight:normal;"> or <span style="color:000000;font-weight:bold;">nil<span style="color:000000;font-weight:normal;">, <span style="color:FF0000;font-weight:bold;">string
<span style="color:000000;font-weight:normal;">
                Sends signal <span style="color:DDDD00;font-weight:bold;">signal<span style="color:000000;font-weight:normal;"> to thread <span style="color:DDDD00;font-weight:bold;">pid<span style="color:000000;font-weight:normal;">.

        <span style="color:000000;font-weight:bold;">kill<span style="color:000000;font-weight:normal;">(<span style="color:000000;font-weight:bold;">pid<span style="color:000000;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:000000;font-weight:normal;">): <span style="color:FF00FF;font-weight:bold;">boolean<span style="color:000000;font-weight:normal;"> or <span style="color:000000;font-weight:bold;">nil<span style="color:000000;font-weight:normal;">, <span style="color:FF0000;font-weight:bold;">string<span style="color:000000;font-weight:normal;">
                Alias for <span style="color:000000;font-weight:bold;">signal<span style="color:000000;font-weight:normal;">(<span style="color:000000;font-weight:bold;">pid<span style="color:000000;font-weight:normal;">, <span style="color:000000;font-weight:bold;">signals.kill<span style="color:000000;font-weight:normal;">)

<span style="color:000000;font-weight:bold;">COPYRIGHT
        Monolith Kernel Interfaces<span style="color:000000;font-weight:normal;"> (c) 2020 Ocawesome101 under the GNU GPLv3.

<span style="color:000000;font-weight:bold;">SEE ALSO
        computer<span style="color:000000;font-weight:normal;">(<span style="color:000000;font-weight:bold;">2<span style="color:000000;font-weight:normal;">), <span style="color:000000;font-weight:bold;">ps<span style="color:000000;font-weight:normal;">(<span style="color:000000;font-weight:bold;">1<span style="color:000000;font-weight:normal;">), <span style="color:000000;font-weight:bold;">kill<span style="color:000000;font-weight:normal;">(<span style="color:000000;font-weight:bold;">1<span style="color:000000;font-weight:normal;">)


</pre></div></body></html>